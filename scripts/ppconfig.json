{"message":"Not Found","documentation_url":"https://docs.github.com/rest/git/refs#get-all-references-in-a-namespace","status":"404","name":"ebbeeadee","url":"http://stu-oa.xxgcxy.cn/scloudapp/#/pages/login/login","showName":"签到JYHE","appid":"com.ebbeeadee.pakeplus","icon":"","iconPath":"C:\\Users\\JYhe\\AppData\\Roaming\\com.pakeplus.pacbao\\ebbeeadee.png","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.1","preview":"Android","platform":["1-1"],"width":412,"height":915,"desc":"","jsFile":[],"filterCss":"","customJs":"// very important, if you don't know what it is, don't touch it\n// 非常重要，不懂代码不要动，这里可以解决80%的问题，也可以生产1000+的bug\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    console.log('origin', origin, isBaseTargetBlank)\n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    location.href = url\n}\n\ndocument.addEventListener('click', hookClick, { capture: true })\n\n\n(function() {\n    console.log(\"[Inject] Camera QR injector loaded\");\n\n    // 等页面加载完再执行\n    function ready(callback) {\n        if (document.readyState !== 'loading') {\n            callback();\n        } else {\n            document.addEventListener(\"DOMContentLoaded\", callback);\n        }\n    }\n\n    ready(function () {\n\n        console.log(\"[Inject] Document ready\");\n\n        // 创建 video 预览窗口\n        if (!document.getElementById(\"scanVideo\")) {\n            const video = document.createElement(\"video\");\n            video.id = \"scanVideo\";\n            video.style.cssText = \n                width: 100%;\n                height: 300px;\n                background: #000;\n                position: fixed;\n                bottom: 10px;\n                left: 0;\n                z-index: 999999;\n            ;\n            video.setAttribute(\"playsinline\", true);\n            video.setAttribute(\"webkit-playsinline\", true);\n            document.body.appendChild(video);\n        }\n\n        // 加载 ZXing\n        function loadZXing(callback) {\n            if (window.ZXing) {\n                callback();\n                return;\n            }\n            const script = document.createElement(\"script\");\n            script.src = \"https://cdn.jsdelivr.net/npm/@zxing/library@latest\";\n            script.onload = callback;\n            document.body.appendChild(script);\n        }\n\n        // 覆盖或提供全局 scanCode()\n        function hookScanner() {\n            console.log(\"[Inject] Trying to hook scanCode...\");\n\n            // 等待你页面的 scanCode 方法出现（因为是打包后的 JS，可能晚加载）\n            const timer = setInterval(() => {\n\n                // 寻找页面中定义的 scanCode()\n                let target = null;\n\n                // 情况 1：Vue 实例在 window 上\n                if (window.uniappVue && window.uniappVue.scanCode) {\n                    target = window.__uniappVue;\n                }\n\n                // 情况 2：页面组件实例\n                if (!target && window.uniappPages) {\n                    Object.values(window.uniappPages).forEach(p => {\n                        if (p.scanCode) target = p;\n                    });\n                }\n\n                // 情况 3：递归查找所有对象中的 scanCode\n                if (!target) {\n                    for (let k in window) {\n                        try {\n                            if (window[k] && typeof window[k].scanCode === \"function\") {\n                                target = window[k];\n                                break;\n                            }\n                        } catch (e) {}\n                    }\n                }\n\n                if (!target) return;\n\n                clearInterval(timer);\n                console.log(\"[Inject] Found scanCode():\", target);\n\n                // 备份原函数（用于微信环境）\n                const oldScanCode = target.scanCode;\n\n                // 注入新逻辑\n                target.scanCode = function () {\n                    console.log(\"[Inject] scanCode override called\");\n\n                    const isWeChat = /micromessenger/i.test(navigator.userAgent);\n\n                    if (isWeChat) {\n                        console.log(\"[Inject] Using WeChat scan\");\n                        return oldScanCode.apply(this, arguments);\n                    }\n\n                    console.log(\"[Inject] Using ZXing scan\");\n\n                    loadZXing(() => {\n                        const codeReader = new ZXing.BrowserQRCodeReader();\n                        codeReader.decodeFromVideoDevice(\n                            null,\n                            'scanVideo',\n                            (result, err) => {\n                                if (result) {\n                                    console.log(\"[Inject] QR detected:\", result.text);\n                                    codeReader.reset();\n\n                                    // 调用业务逻辑：上传扫码结果\n                                  if (this.postScanCourseTeachingJournalStudent) {\n                                        this.postScanCourseTeachingJournalStudent(result.text);\n                                    } else {\n                                        alert(\"扫描结果：\" + result.text);\n                                    }\n                                }\n                            }\n                        );\n                    });\n                };\n\n                console.log(\"%c[Inject] scanCode successfully hooked!\", \"color:green\");\n\n            }, 800);\n        }\n\n        hookScanner();\n    });\n\n})();","isHtml":false,"htmlPath":"","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v2.1.3","iosRepo":"PakePlus-iOS-v2.1.3","androidRepo":"PakePlus-Android-v2.1.3","more":{"windows":{"label":"ebbeeadee","title":"签到JYHE","url":"http://stu-oa.xxgcxy.cn/scloudapp/#/pages/login/login","userAgent":"Mozilla/5.0 (Linux; Android 14; Pixel 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36","width":412,"height":915,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"ebbeeadee","showName":"签到JYHE","version":"0.0.1","webUrl":"http://stu-oa.xxgcxy.cn/scloudapp/#/pages/login/login","id":"com.ebbeeadee.pakeplus.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"android":{"name":"ebbeeadee","showName":"签到JYHE","version":"0.0.1","webUrl":"http://stu-oa.xxgcxy.cn/scloudapp/#/pages/login/login","id":"com.ebbeeadee.pakeplus.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"desktop":{"name":"ebbeeadee","showName":"签到JYHE","version":"0.0.1","id":"com.ebbeeadee.pakeplus.desktop","desc":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","webUrl":"http://stu-oa.xxgcxy.cn/scloudapp/#/pages/login/login","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"local","debug":false}}